{"version":3,"sources":["webpack:///src/app/folder/mi-perfil-cita/mi-perfil-cita.page.html","webpack:///src/app/folder/mi-perfil-cita/mi-perfil-cita-routing.module.ts","webpack:///src/app/folder/mi-perfil-cita/mi-perfil-cita.module.ts","webpack:///src/app/folder/mi-perfil-cita/mi-perfil-cita.page.scss","webpack:///src/app/folder/mi-perfil-cita/mi-perfil-cita.page.ts"],"names":["routes","path","component","MiPerfilCitaPageRoutingModule","imports","forChild","exports","MiPerfilCitaPageModule","declarations","MiPerfilCitaPage","usuarioService","angularFireStorage","loadingController","alertCtrt","mensajeErrorService","user","getCita","localStorage","getItem","subscribe","res","mensaje","create","cssClass","message","loading","present","event","target","files","file","reader","FileReader","onload","e","image","result","readAsDataURL","form","presentLoading","telefono","value","length","slice","UpdateUserCompleto","storageRef","storage","ref","child","name","put","then","data","getDownloadURL","downloadURL","err","dismiss","failedAlert","text","header","buttons","handler","alert","selector","template"],"mappings":"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","file":"folder-mi-perfil-cita-mi-perfil-cita-module-es5.js","sourcesContent":["export default \"<ion-header >\\n  <ion-toolbar>\\n\\n    <ion-segment color=\\\"tertiary\\\" value=\\\"perfil\\\" >\\n\\n      <!-- <ion-segment-button *ngIf=\\\"Rol==Ayudante\\\" value=\\\"publicaciones\\\" [routerLink]=\\\"['/mis-ayudantias']\\\" routerDirection=\\\"root\\\">\\n        <ion-icon name=\\\"file-tray-stacked-outline\\\" size=\\\"large\\\"></ion-icon> \\n        <ion-label style=\\\"font-size: 14;\\\">Mis Cursos</ion-label>\\n      </ion-segment-button> -->\\n\\n      <ion-segment-button value=\\\"publicaciones\\\" [routerLink]=\\\"['/publicaciones']\\\" routerDirection=\\\"root\\\">\\n        <ion-icon name=\\\"newspaper-outline\\\" size=\\\"large\\\"></ion-icon> \\n        <ion-label style=\\\"font-size: 14;\\\">Publicaciones</ion-label>\\n      </ion-segment-button>\\n      \\n      <ion-segment-button value=\\\"cursos\\\" [routerLink]=\\\"['/cursos']\\\" routerDirection=\\\"root\\\">\\n        <ion-icon name=\\\"library-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label style=\\\"font-size: 14px;\\\">Cursos</ion-label>\\n      </ion-segment-button>\\n    \\n    \\n      <ion-segment-button value=\\\"perfil\\\" [routerLink]=\\\"['/perfil']\\\" routerDirection=\\\"root\\\">\\n        <ion-icon name=\\\"person-circle-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label style=\\\"font-size: 12px;\\\">Perfil</ion-label>\\n      </ion-segment-button>\\n\\n      <ion-segment-button value=\\\"citas\\\" *ngIf = \\\"mostrarCita == 'Si'\\\" [routerLink]=\\\"['/citas']\\\" routerDirection=\\\"root\\\">\\n        <ion-icon name=\\\"flame-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label style=\\\"font-size: 12px;\\\">Biffis</ion-label>\\n      </ion-segment-button>\\n      \\n  \\n\\n  \\n\\n    </ion-segment>\\n\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-segment color=\\\"tertiary\\\" value=\\\"perfil\\\">\\n  \\n    <ion-segment-button value=\\\"buscar\\\" [routerLink]=\\\"['/curso-detalle',id, nombreCurso]\\\" routerDirection=\\\"root\\\">\\n      <ion-icon name=\\\"accessibility-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label>Buscar</ion-label>\\n    </ion-segment-button>\\n    \\n    <ion-segment-button value=\\\"ayudantes\\\" [routerLink]=\\\"['/curso-ayudantes',id, nombreCurso]\\\" routerDirection=\\\"root\\\">\\n      <ion-icon name=\\\"chatbubbles-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label>Chats</ion-label>\\n    </ion-segment-button>\\n\\n    <ion-segment-button value=\\\"perfil\\\" [routerLink]=\\\"['/mi-perfil-cita']\\\" routerDirection=\\\"root\\\">\\n      <ion-icon name=\\\"person-outline\\\" size=\\\"large\\\"></ion-icon> <ion-label style=\\\"font-size: 12px;\\\">Perfil</ion-label>\\n    </ion-segment-button>\\n\\n  </ion-segment>\\n  \\n  <ion-img class=\\\"circle-pic\\\"  src=\\\"{{user.Foto}}\\\" ></ion-img>\\n\\n  <ion-card>\\n    <ion-item>\\n      <ion-icon name=\\\"person-outline\\\" size=\\\"large\\\" style=\\\"margin-right: 8px;\\\"></ion-icon>\\n      <ion-label style=\\\"font-size: 17px;\\\">{{user.Nombre}} {{user.Apellido}}</ion-label>\\n    </ion-item>\\n  \\n\\n\\n\\n\\n\\n\\n    <ion-item>\\n      <ion-icon routerLink=\\\"/perfil-update\\\" name=\\\"create-outline\\\" size=\\\"large\\\" style=\\\"margin-right: 8px;\\\" layout=\\\"icon-end\\\" slot=\\\"end\\\"></ion-icon>\\n\\n    </ion-item>\\n  \\n  </ion-card>\\n\\n  \\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button routerLink=\\\"/sugerencias\\\">\\n     <ion-icon name=\\\"help-circle-outline\\\" size=\\\"large\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n</ion-content>\\n<style>\\n  .circle-pic {     \\n    width: 55%;\\n    height: 35%;\\n    margin: auto;\\n    display: block;\\n    margin-bottom: 10px;\\n    margin-top: 10px;\\n    /* -webkit-border-radius: 50%;\\n    border-radius: 50%;\\n    border-width: 50px; */\\n\\n  }\\n</style>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MiPerfilCitaPage } from './mi-perfil-cita.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MiPerfilCitaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MiPerfilCitaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MiPerfilCitaPageRoutingModule } from './mi-perfil-cita-routing.module';\n\nimport { MiPerfilCitaPage } from './mi-perfil-cita.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    MiPerfilCitaPageRoutingModule\n  ],\n  declarations: [MiPerfilCitaPage]\n})\nexport class MiPerfilCitaPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ZvbGRlci9taS1wZXJmaWwtY2l0YS9taS1wZXJmaWwtY2l0YS5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { AngularFireStorage } from 'angularfire2/storage';\r\nimport { AlertController, LoadingController } from '@ionic/angular';\r\nimport { Citas } from 'src/app/models/citas';\r\nimport { CitasService} from 'src/app/services/citas.service';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { MensajeErrorService } from 'src/app/services/mensaje-error.service';\r\n@Component({\r\n  selector: 'app-mi-perfil-cita',\r\n  templateUrl: './mi-perfil-cita.page.html',\r\n  styleUrls: ['./mi-perfil-cita.page.scss'],\r\n})\r\nexport class MiPerfilCitaPage implements OnInit {\r\n\r\n  public user: Citas=new Citas();\r\n  public image;\r\n  file: File;\r\n  loading: HTMLIonLoadingElement;\r\n\r\n  constructor(private usuarioService: CitasService,\r\n              private angularFireStorage: AngularFireStorage,\r\n              public loadingController: LoadingController,              \r\n              private alertCtrt: AlertController,\r\n              private mensajeErrorService: MensajeErrorService,\r\n              ) { }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n    this.usuarioService.getCita(localStorage.getItem('userId')).subscribe(res => {this.user =res;});\r\n\r\n  }\r\n\r\n  async presentLoading(mensaje: string) {\r\n    this.loading = await this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: mensaje,\r\n      //duration: 2000\r\n    });\r\n    return this.loading.present();\r\n  }\r\n\r\n\r\n  readURL(event): void {\r\n    if (event.target.files && event.target.files[0]) {\r\n        this.file = event.target.files[0];\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = e => this.image = reader.result;\r\n\r\n        reader.readAsDataURL(this.file);\r\n    }\r\n  }\r\n\r\n\r\n  async UpdateUser(form):Promise<void>{\r\n   // this.presentLoading(\"Espere por favor...\");\r\n   this.presentLoading(\"Espere por favor...\");\r\n    var telefono = form.value.telefono;\r\n    if(telefono.length==10){\r\n      telefono = '+593' + telefono.slice(1,telefono.length);\r\n    }\r\n\r\n    \r\n    // if(this.file!='null'){\r\n    //   this.guardarArchivo(telefono);\r\n    // }\r\n    // else{\r\n      this.UpdateUserCompleto(telefono,this.image)\r\n    // }\r\n    \r\n  }\r\n\r\n  guardarArchivo(telefono: string){\r\n    //this.presentLoading(\"Espere por favor...\");\r\n    \r\n    var storageRef = this.angularFireStorage.storage.ref()\r\n\r\n    \r\n    storageRef.child(this.file.name).put(this.file)\r\n    .then(\r\n            data=>{\r\n                    data.ref.getDownloadURL().then(\r\n                        downloadURL => {\r\n                          this.UpdateUserCompleto(telefono, downloadURL)\r\n\r\n                      \r\n                        }\r\n                    ).catch(err=>{this.loading.dismiss(), this.failedAlert(\"Error al cargar la foto de perfil, intentelo de nuevo\")});\r\n                    \r\n\r\n            }\r\n    )     \r\n\r\n\r\n  }\r\n\r\n  async failedAlert(text: string) {\r\n    const alert = await this.alertCtrt.create({\r\n     cssClass: 'my-custom-class',\r\n     header: text,\r\n    buttons: [{\r\n    text: 'OK',\r\n      handler: () => {\r\n        \r\n      }\r\n    }]   \r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n \r\n\r\n  \r\n  async UpdateUserCompleto(telefono: string, downloadURL:string){\r\n  //  this.user.Telefono = telefono;\r\n  //  this.user.FotoPerfil = downloadURL;\r\n  //  var userId = localStorage.getItem('userId')\r\n  //  this.usuarioService.updateUsuario(userId, this.user).\r\n  //  then(\r\n  //    auth=>{\r\n  //      this.loading.dismiss();\r\n  //      \r\n  //      this.router.navigateByUrl(\"/perfil\")     \r\n  //  }  \r\n  //  ).catch(async error => {\r\n  //    this.loading.dismiss();\r\n  //    var mensaje=error.code.split('/')[1];\r\n  //    const presentarMensaje = this.mensajeErrorService.AuthErrorCodeSpanish(mensaje);\r\n  //    this.failedAlert(presentarMensaje)\r\n  //  })\r\n  }\r\n\r\n\r\n\r\n}\r\n"]}